<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¸¸é¾™å¹³æ°‘ç”µç«ç‚¹å•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            min-height: 100vh;
            padding-bottom: 70px;
        }
        
        /* æ³¨å†Œ/ç™»å½•å¼¹çª— */
        .modal {
            display: none;
            justify-content: center;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
        }
        
        .modal-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .modal-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            text-align: center;
            color: #FFD700;
        }
        
        .modal-input {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
        }
        
        .modal-select {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
        }
        
        .modal-btn {
            width: 100%;
            padding: 15px;
            margin-top: 20px;
            background: linear-gradient(45deg, #FF512F, #DD2476);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .modal-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(221, 36, 118, 0.6);
        }
        
        /* ä¸»å®¹å™¨ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: none;
        }
        
        /* å¤´éƒ¨ */
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-top: 20px;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, #ff8a00, #da1b60);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 20px;
        }
        
        /* åº•éƒ¨å¯¼èˆª */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 100;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .nav-item.active {
            color: #FFD700;
        }
        
        .nav-icon {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        
        /* é¡µé¢å†…å®¹ */
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        /* ä¸»é¡µ */
        .orders-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .order-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s;
        }
        
        .order-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .order-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #FFD700;
        }
        
        .order-desc {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 15px;
        }
        
        .order-btn {
            width: 100%;
            padding: 10px;
            background: linear-gradient(45deg, #2196F3, #21CBF3);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .order-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.4);
        }
        
        /* åˆ†ç±»é¡µé¢ */
        .categories {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }
        
        .category {
            padding: 15px 25px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .category.active {
            background: rgba(255, 215, 0, 0.3);
            color: #FFD700;
        }
        
        /* æ¶ˆæ¯é¡µé¢ */
        .contact-info {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
        }
        
        .wechat-id {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #FFD700;
        }
        
        .qr-code {
            max-width: 200px;
            margin: 0 auto;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .qr-code img {
            width: 100%;
            height: auto;
            display: block;
        }
        
        /* æˆ‘çš„é¡µé¢ */
        .profile {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin-right: 20px;
            overflow: hidden;
        }
        
        .avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .user-info {
            flex: 1;
        }
        
        .user-info h2 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        
        .user-info p {
            color: rgba(255, 255, 255, 0.7);
        }
        
        /* é€€å‡ºç™»å½•æŒ‰é’® */
        #logoutBtn {
            width: auto;
            padding: 8px 15px;
            margin-top: 10px;
            font-size: 0.9rem;
        }
        
        .review-status {
            margin-top: 30px;
        }
        
        .status-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
        }
        
        .status-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: #FFD700;
        }
        
        .status-desc {
            color: rgba(255, 255, 255, 0.7);
        }
        
        /* ä¸‹å•å¼¹çª— */
        .order-modal {
            display: none;
            justify-content: center;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
        }
        
        .order-modal-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .order-modal-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-align: center;
            color: #FFD700;
        }
        
        .specs-modal {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .spec-modal {
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .spec-modal:hover {
            background: rgba(255, 215, 0, 0.3);
        }
        
        .spec-modal.active {
            background: rgba(255, 215, 0, 0.5);
            color: #FFD700;
        }
        
        /* å®¡æ ¸å¼¹çª— */
        .review-modal {
            display: none;
            justify-content: center;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
        }
        
        .review-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .review-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #FFD700;
        }
        
        .review-message {
            margin-bottom: 20px;
            color: rgba(255, 255, 255, 0.8);
        }
        
        /* åå°ç®¡ç† */
        .admin-panel {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 100;
        }
        
        .admin-btn {
            padding: 8px 15px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .admin-modal {
            display: none;
            justify-content: center;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
        }
        
        .admin-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .admin-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            text-align: center;
            color: #FFD700;
        }
        
        .admin-section {
            margin-bottom: 30px;
        }
        
        .admin-section h3 {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #FFD700;
        }
        
        .user-list, .order-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .user-item, .order-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
        }
        
        .order-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .approve-btn, .reject-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .approve-btn {
            background: #4CAF50;
            color: white;
        }
        
        .reject-btn {
            background: #f44336;
            color: white;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .orders-grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .profile {
                flex-direction: column;
                text-align: center;
            }
            
            .avatar {
                margin-right: 0;
                margin-bottom: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- æ¸¸æˆåç§°è¾“å…¥å¼¹çª— -->
    <div class="modal" id="gameNameModal">
        <div class="modal-content">
            <h2 class="modal-title">è¾“å…¥æ¸¸æˆåç§°</h2>
            <input type="text" class="modal-input" id="gameNameInput" placeholder="è¯·è¾“å…¥æ¸¸æˆåç§°">
            <button class="modal-btn" id="gameNameConfirmBtn">ä¸‹ä¸€æ­¥</button>
        </div>
    </div>
    
    <!-- åŒºæœé€‰æ‹©å¼¹çª— -->
    <div class="modal" id="serverModal">
        <div class="modal-content">
            <h2 class="modal-title">é€‰æ‹©åŒºæœ</h2>
            <select class="modal-select" id="serverSelect">
                <option value="">è¯·é€‰æ‹©åŒºæœ</option>
                <option value="QåŒº">QåŒº</option>
                <option value="VåŒº">VåŒº</option>
            </select>
            <button class="modal-btn" id="serverConfirmBtn">è¿›å…¥</button>
        </div>
    </div>
    
    <!-- ä¸»å®¹å™¨ -->
    <div class="container" id="mainContainer">
        <header>
            <h1>æ¬¢è¿æ¥åˆ°å¹³æ°‘ç”µç«ç‚¹å•</h1>
            <div class="subtitle">å…¨ç½‘æœ€æ€§ä»·æ¯”çš„é¡¶å°–æŠ¤</div>
        </header>
        
        <!-- ä¸»é¡µ -->
        <div class="page active" id="homePage">
            <h2>çƒ­é—¨è®¢å•</h2>
            <div class="orders-grid" id="ordersGrid">
                <!-- è®¢å•å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
        
        <!-- åˆ†ç±»é¡µé¢ -->
        <div class="page" id="categoryPage">
            <h2>åˆ†ç±»</h2>
            <div class="categories">
                <div class="category active" data-category="all">å…¨éƒ¨</div>
                <div class="category" data-category="equipment">è£…å¤‡</div>
                <div class="category" data-category="skin">çš®è‚¤</div>
                <div class="category" data-category="vip">VIP</div>
                <div class="category" data-category="other">å…¶ä»–</div>
            </div>
            
            <div class="orders-grid" id="categoryOrdersGrid">
                <!-- åˆ†ç±»è®¢å•å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
        
        <!-- æ¶ˆæ¯é¡µé¢ -->
        <div class="page" id="messagePage">
            <h2>è”ç³»å®¢æœ</h2>
            <div class="contact-info">
                <div class="wechat-id">å¾®ä¿¡å·: example123</div>
                <div class="qr-code">
                    <!-- äºŒç»´ç å›¾ç‰‡ï¼Œå¯æ›¿æ¢ -->
                    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB2aWV3Qm94PSIwIDAgMjAwIDIwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2ZmZiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiMwMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj7lm77niYc8L3RleHQ+PHRleHQgeD0iNTAlIiB5PSI1NSUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzAwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9IjEuM2VtIj5XZWNoYXQgUVLor7fovpPlhaXniYg8L3RleHQ+PC9zdmc+" alt="å¾®ä¿¡äºŒç»´ç ">
                </div>
            </div>
        </div>
        
        <!-- æˆ‘çš„é¡µé¢ -->
        <div class="page" id="profilePage">
            <h2>æˆ‘çš„ä¿¡æ¯</h2>
            <div class="profile">
                <div class="avatar">
                    <!-- éšæœºå¤´åƒ -->
                    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MCIgaGVpZ2h0PSI4MCIgdmlld0JveD0iMCAwIDgwIDgwIj48Y2lyY2xlIGN4PSI0MCIgY3k9IjQwIiByPSI0MCIgZmlsbD0iIzMzYzhmZiIvPjxjaXJjbGUgY3g9IjQwIiBjeT0iMzAiIHI9IjE1IiBmaWxsPSIjZmZmIi8+PHBhdGggZD0iTTI1IDYwIEEyMCAyMCA0IDAgMSA1NSA2MCBMNTUgNzAgQTIwIDIwIDAgMCAxIDI1IDcwIFoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=" alt="ç”¨æˆ·å¤´åƒ">
                </div>
                <div class="user-info">
                    <h2 id="userName">ç”¨æˆ·å</h2>
                    <p id="userServer">åŒºæœ: QåŒº</p>
                    <button class="modal-btn" id="logoutBtn">é€€å‡ºç™»å½•</button>
                </div>
            </div>
            
            <div class="review-status">
                <h3>æˆ‘çš„è®¢å•</h3>
                <div id="userOrdersList">
                    <!-- ç”¨æˆ·è®¢å•å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>
        
        <!-- åº•éƒ¨å¯¼èˆª -->
        <div class="bottom-nav">
            <div class="nav-item active" data-page="homePage">
                <div class="nav-icon">ğŸ </div>
                <div>ä¸»é¡µ</div>
            </div>
            <div class="nav-item" data-page="categoryPage">
                <div class="nav-icon">ğŸ“‚</div>
                <div>åˆ†ç±»</div>
            </div>
            <div class="nav-item" data-page="messagePage">
                <div class="nav-icon">ğŸ’¬</div>
                <div>æ¶ˆæ¯</div>
            </div>
            <div class="nav-item" data-page="profilePage">
                <div class="nav-icon">ğŸ‘¤</div>
                <div>æˆ‘çš„</div>
            </div>
        </div>
    </div>
    
    <!-- ä¸‹å•å¼¹çª— -->
    <div class="order-modal" id="orderModal">
        <div class="order-modal-content">
            <h2 class="order-modal-title" id="orderModalTitle">é€‰æ‹©è§„æ ¼</h2>
            <div class="specs-modal" id="specsModal">
                <!-- è§„æ ¼å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
            <button class="modal-btn" id="confirmOrderBtn">ç¡®è®¤ä¸‹å•</button>
            <button class="modal-btn" style="background: #6c757d; margin-top: 10px;" id="cancelOrderBtn">å–æ¶ˆ</button>
        </div>
    </div>
    
    <!-- å®¡æ ¸å¼¹çª— -->
    <div class="review-modal" id="reviewModal">
        <div class="review-content">
            <h2 class="review-title" id="reviewTitle">å®¡æ ¸é€šçŸ¥</h2>
            <p class="review-message" id="reviewMessage">æ‚¨çš„è®¢å•æ­£åœ¨å®¡æ ¸ä¸­</p>
            <button class="modal-btn" id="reviewCloseBtn">ç¡®å®š</button>
        </div>
    </div>
    
    <!-- åå°ç®¡ç† -->
    <div class="admin-panel">
        <button class="admin-btn" id="adminBtn">ç®¡ç†åå°</button>
    </div>
    
    <!-- åå°å¯†ç éªŒè¯ -->
    <div class="modal" id="adminPasswordModal">
        <div class="modal-content">
            <h2 class="modal-title">åå°ç®¡ç†</h2>
            <p style="text-align: center; margin-bottom: 15px;">è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç </p>
            <input type="password" class="modal-input" id="adminPassword" placeholder="è¯·è¾“å…¥å¯†ç ">
            <button class="modal-btn" id="adminPasswordBtn">è¿›å…¥</button>
        </div>
    </div>
    
    <div class="admin-modal" id="adminModal">
        <div class="admin-content">
            <h2 class="admin-title">åå°ç®¡ç†ç³»ç»Ÿ</h2>
            
            <div class="admin-section">
                <h3>ç”¨æˆ·åˆ—è¡¨</h3>
                <div class="user-list" id="userList">
                    <!-- ç”¨æˆ·åˆ—è¡¨å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
            
            <div class="admin-section">
                <h3>è®¢å•åˆ—è¡¨</h3>
                <div class="order-list" id="adminOrderList">
                    <!-- è®¢å•åˆ—è¡¨å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
            
            <button class="modal-btn" id="adminCloseBtn">å…³é—­</button>
        </div>
    </div>

    <script>
        // ç”¨æˆ·æ•°æ®
        let currentUser = null;
        let users = JSON.parse(localStorage.getItem('users')) || [];
        let orders = JSON.parse(localStorage.getItem('orders')) || [];
        let nextOrderId = orders.length + 1;
        let currentOrder = null;
        
        // ç®¡ç†å‘˜å¯†ç 
        const ADMIN_PASSWORD = "admin123";
        
        // DOMå…ƒç´ 
        const gameNameModal = document.getElementById('gameNameModal');
        const gameNameInput = document.getElementById('gameNameInput');
        const gameNameConfirmBtn = document.getElementById('gameNameConfirmBtn');
        const serverModal = document.getElementById('serverModal');
        const serverSelect = document.getElementById('serverSelect');
        const serverConfirmBtn = document.getElementById('serverConfirmBtn');
        const mainContainer = document.getElementById('mainContainer');
        const userNameElement = document.getElementById('userName');
        const userServerElement = document.getElementById('userServer');
        const logoutBtn = document.getElementById('logoutBtn');
        const ordersGrid = document.getElementById('ordersGrid');
        const categoryOrdersGrid = document.getElementById('categoryOrdersGrid');
        const categories = document.querySelectorAll('.category');
        const navItems = document.querySelectorAll('.nav-item');
        const pages = document.querySelectorAll('.page');
        const orderModal = document.getElementById('orderModal');
        const orderModalTitle = document.getElementById('orderModalTitle');
        const specsModal = document.getElementById('specsModal');
        const confirmOrderBtn = document.getElementById('confirmOrderBtn');
        const cancelOrderBtn = document.getElementById('cancelOrderBtn');
        const reviewModal = document.getElementById('reviewModal');
        const reviewTitle = document.getElementById('reviewTitle');
        const reviewMessage = document.getElementById('reviewMessage');
        const reviewCloseBtn = document.getElementById('reviewCloseBtn');
        const userOrdersList = document.getElementById('userOrdersList');
        const adminBtn = document.getElementById('adminBtn');
        const adminPasswordModal = document.getElementById('adminPasswordModal');
        const adminPasswordInput = document.getElementById('adminPassword');
        const adminPasswordBtn = document.getElementById('adminPasswordBtn');
        const adminModal = document.getElementById('adminModal');
        const userList = document.getElementById('userList');
        const adminOrderList = document.getElementById('adminOrderList');
        const adminCloseBtn = document.getElementById('adminCloseBtn');
        
        // åˆå§‹åŒ–
        function init() {
            // æ£€æŸ¥æ˜¯å¦å·²ç™»å½•
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showMainApp();
            } else {
                // åªæ˜¾ç¤ºæ¸¸æˆåç§°è¾“å…¥å¼¹çª—ï¼Œä¸æ¶‰åŠä»»ä½•åå°ç›¸å…³å¼¹çª—
                gameNameModal.style.display = 'flex';
            }
            
            // ç”Ÿæˆè®¢å•
            generateOrders();
            generateCategoryOrders();
            
            // æ›´æ–°ç”¨æˆ·è®¢å•ï¼ˆä»…å½“å‰ç”¨æˆ·ç™»å½•æ—¶ï¼‰
            if (currentUser) {
                updateUserOrders();
            }
        }
        
        // ç”Ÿæˆè®¢å•æ•°æ®
        function generateOrders() {
            const orderData = getOrderData();
            
            ordersGrid.innerHTML = '';
            
            orderData.forEach((order, index) => {
                const orderCard = document.createElement('div');
                orderCard.className = 'order-card';
                orderCard.innerHTML = `
                    <div class="order-title">${order.title}</div>
                    <div class="order-desc">${order.desc}</div>
                    <button class="order-btn" data-order="${index}">ç«‹å³ä¸‹å•</button>
                `;
                ordersGrid.appendChild(orderCard);
            });
            
            // æ·»åŠ ä¸‹å•äº‹ä»¶
            document.querySelectorAll('.order-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const orderIndex = parseInt(this.dataset.order);
                    showOrderModal(orderIndex);
                });
            });
        }
        
        // ç”Ÿæˆåˆ†ç±»è®¢å•
        function generateCategoryOrders() {
            const orderData = getOrderData();
            
            categoryOrdersGrid.innerHTML = '';
            
            // é»˜è®¤æ˜¾ç¤ºå…¨éƒ¨
            filterOrdersByCategory('all');
            
            // æ·»åŠ åˆ†ç±»ç‚¹å‡»äº‹ä»¶
            categories.forEach(category => {
                category.addEventListener('click', function() {
                    const categoryType = this.dataset.category;
                    
                    // æ›´æ–°åˆ†ç±»çŠ¶æ€
                    categories.forEach(c => c.classList.remove('active'));
                    this.classList.add('active');
                    
                    // è¿‡æ»¤è®¢å•
                    filterOrdersByCategory(categoryType);
                });
            });
        }
        
        // æ ¹æ®åˆ†ç±»è¿‡æ»¤è®¢å•
        function filterOrdersByCategory(category) {
            const orderData = getOrderData();
            categoryOrdersGrid.innerHTML = '';
            
            let filteredOrders = orderData;
            if (category !== 'all') {
                filteredOrders = orderData.filter(order => order.category === category);
            }
            
            filteredOrders.forEach((order, index) => {
                const orderCard = document.createElement('div');
                orderCard.className = 'order-card';
                orderCard.innerHTML = `
                    <div class="order-title">${order.title}</div>
                    <div class="order-desc">${order.desc}</div>
                    <button class="order-btn" data-order="${orderData.indexOf(order)}">ç«‹å³ä¸‹å•</button>
                `;
                categoryOrdersGrid.appendChild(orderCard);
            });
            
            // æ·»åŠ ä¸‹å•äº‹ä»¶
            document.querySelectorAll('#categoryOrdersGrid .order-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const orderIndex = parseInt(this.dataset.order);
                    showOrderModal(orderIndex);
                });
            });
        }
        
        // è·å–è®¢å•æ•°æ®
        function getOrderData() {
            return [
                { title: "é«˜çº§è£…å¤‡ç¤¼åŒ…", desc: "åŒ…å«å¤šç§é«˜çº§è£…å¤‡ï¼Œæå‡æˆ˜æ–—åŠ›", category: "equipment", 
                  specs: ["åŸºç¡€ç‰ˆ(1ä»¶)", "æ ‡å‡†ç‰ˆ(3ä»¶)", "è±ªåç‰ˆ(5ä»¶)"] },
                { title: "ç¨€æœ‰çš®è‚¤æŠ½å¥–", desc: "ç¨€æœ‰çš®è‚¤ï¼Œè®©ä½ çš„è§’è‰²æ›´ç‹¬ç‰¹", category: "skin", 
                  specs: ["æ™®é€šçš®è‚¤", "ç¨€æœ‰çš®è‚¤", "ä¼ è¯´çš®è‚¤"] },
                { title: "VIPä¼šå‘˜å¥—é¤", desc: "VIPç‰¹æƒï¼Œäº«å—å°Šè´µä½“éªŒ", category: "vip", 
                  specs: ["æœˆå¡", "å­£å¡", "å¹´å¡"] },
                { title: "æ¸¸æˆå¸å¤§ç¤¼åŒ…", desc: "å¤§é‡æ¸¸æˆå¸ï¼Œè´­ä¹°å¿ƒä»ªç‰©å“", category: "other", 
                  specs: ["1000å¸", "5000å¸", "10000å¸"] },
                { title: "é™å®šç§°å·è·å–", desc: "é™å®šç§°å·ï¼Œå½°æ˜¾å°Šè´µèº«ä»½", category: "equipment", 
                  specs: ["æ™®é€šç§°å·", "ç¨€æœ‰ç§°å·", "ä¼ è¯´ç§°å·"] },
                { title: "ç»éªŒåŠ æˆç¤¼åŒ…", desc: "ç»éªŒåŠ æˆï¼Œå¿«é€Ÿæå‡ç­‰çº§", category: "other", 
                  specs: ["10%åŠ æˆ", "30%åŠ æˆ", "50%åŠ æˆ"] },
                { title: "æŠ€èƒ½ä¹¦ç¤¼ç›’", desc: "å¤šç§æŠ€èƒ½ä¹¦ï¼Œå­¦ä¹ å¼ºå¤§æŠ€èƒ½", category: "equipment", 
                  specs: ["åˆçº§æŠ€èƒ½", "ä¸­çº§æŠ€èƒ½", "é«˜çº§æŠ€èƒ½"] },
                { title: "å® ç‰©è›‹æŠ½å–", desc: "ç¨€æœ‰å® ç‰©è›‹ï¼Œå­µåŒ–å¼ºåŠ›ä¼™ä¼´", category: "other", 
                  specs: ["æ™®é€šå® ç‰©", "ç¨€æœ‰å® ç‰©", "ä¼ è¯´å® ç‰©"] },
                { title: "åéª‘çš®è‚¤ç¤¼åŒ…", desc: "ç‚«é…·åéª‘çš®è‚¤ï¼Œè¡Œèµ°æ›´æ‹‰é£", category: "skin", 
                  specs: ["æ™®é€šçš®è‚¤", "ç¨€æœ‰çš®è‚¤", "ä¼ è¯´çš®è‚¤"] },
                { title: "å¼ºåŒ–çŸ³ç¤¼ç›’", desc: "å¼ºåŒ–è£…å¤‡ï¼Œæå‡å±æ€§", category: "equipment", 
                  specs: ["10ä¸ª", "30ä¸ª", "50ä¸ª"] },
                { title: "å®çŸ³ç¤¼åŒ…", desc: "å¤šç§å®çŸ³ï¼Œé•¶åµŒè£…å¤‡å¢å¼ºèƒ½åŠ›", category: "equipment", 
                  specs: ["åˆçº§å®çŸ³", "ä¸­çº§å®çŸ³", "é«˜çº§å®çŸ³"] },
                { title: "æ—¶è£…æŠ½å¥–", desc: "æ—¶å°šå¤–è§‚ï¼Œä¸ªæ€§åŒ–ä½ çš„è§’è‰²", category: "skin", 
                  specs: ["æ™®é€šæ—¶è£…", "ç¨€æœ‰æ—¶è£…", "ä¼ è¯´æ—¶è£…"] },
                { title: "åéª‘è¿›é˜¶ææ–™", desc: "åéª‘è¿›é˜¶ææ–™ï¼Œæå‡åéª‘å“è´¨", category: "equipment", 
                  specs: ["æ™®é€šææ–™", "ç¨€æœ‰ææ–™", "ä¼ è¯´ææ–™"] },
                { title: "ç¿…è†€ç¤¼ç›’", desc: "åä¸½ç¿…è†€ï¼Œç¿±ç¿”å¤©é™…", category: "skin", 
                  specs: ["æ™®é€šç¿…è†€", "ç¨€æœ‰ç¿…è†€", "ä¼ è¯´ç¿…è†€"] },
                { title: "ç¥å™¨æŠ½å¥–", desc: "ç¥å™¨è£…å¤‡ï¼Œæ‹¥æœ‰å¼ºå¤§åŠ›é‡", category: "equipment", 
                  specs: ["æ™®é€šç¥å™¨", "ç¨€æœ‰ç¥å™¨", "ä¼ è¯´ç¥å™¨"] },
                { title: "ç¨€æœ‰é“å…·ç¤¼åŒ…", desc: "ç¨€æœ‰é“å…·ï¼ŒåŠ©åŠ›æ¸¸æˆä½“éªŒ", category: "other", 
                  specs: ["æ™®é€šé“å…·", "ç¨€æœ‰é“å…·", "ä¼ è¯´é“å…·"] },
                { title: "èŠ‚æ—¥é™å®šç¤¼ç›’", desc: "èŠ‚æ—¥é™å®šï¼Œé™æ—¶è·å–", category: "other", 
                  specs: ["æ™®é€šç¤¼ç›’", "ç¨€æœ‰ç¤¼ç›’", "ä¼ è¯´ç¤¼ç›’"] },
                { title: "ä¼ è¯´è£…å¤‡æŠ½å¥–", desc: "ä¼ è¯´è£…å¤‡ï¼Œè¿½æ±‚æè‡´æˆ˜åŠ›", category: "equipment", 
                  specs: ["æ™®é€šè£…å¤‡", "ç¨€æœ‰è£…å¤‡", "ä¼ è¯´è£…å¤‡"] },
                { title: "ç¨€æœ‰å® ç‰©ç¤¼åŒ…", desc: "ç¨€æœ‰å® ç‰©ï¼Œé™ªä¼´å†’é™©æ—…ç¨‹", category: "other", 
                  specs: ["æ™®é€šå® ç‰©", "ç¨€æœ‰å® ç‰©", "ä¼ è¯´å® ç‰©"] },
                { title: "é«˜çº§ææ–™ç¤¼ç›’", desc: "é«˜çº§ææ–™ï¼Œåˆ¶ä½œå¼ºåŠ›è£…å¤‡", category: "equipment", 
                  specs: ["æ™®é€šææ–™", "ç¨€æœ‰ææ–™", "ä¼ è¯´ææ–™"] }
            ];
        }
        
        // æ˜¾ç¤ºä¸‹å•å¼¹çª—
        function showOrderModal(orderIndex) {
            const orderData = getOrderData();
            const order = orderData[orderIndex];
            
            currentOrder = order;
            orderModalTitle.textContent = order.title;
            
            // ç”Ÿæˆè§„æ ¼é€‰é¡¹
            specsModal.innerHTML = '';
            order.specs.forEach((spec, index) => {
                const specElement = document.createElement('div');
                specElement.className = 'spec-modal';
                specElement.textContent = spec;
                specElement.dataset.spec = index;
                specsModal.appendChild(specElement);
            });
            
            // æ·»åŠ è§„æ ¼é€‰æ‹©äº‹ä»¶
            document.querySelectorAll('.spec-modal').forEach(spec => {
                spec.addEventListener('click', function() {
                    document.querySelectorAll('.spec-modal').forEach(s => s.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            orderModal.style.display = 'flex';
        }
        
        // æ˜¾ç¤ºä¸»åº”ç”¨
        function showMainApp() {
            gameNameModal.style.display = 'none';
            serverModal.style.display = 'none';
            mainContainer.style.display = 'block';
            
            // æ›´æ–°ç”¨æˆ·ä¿¡æ¯
            userNameElement.textContent = currentUser.name;
            userServerElement.textContent = `åŒºæœ: ${currentUser.server}`;
        }
        
        // æ˜¾ç¤ºå®¡æ ¸æ¶ˆæ¯
        function showReviewMessage(title, message) {
            reviewTitle.textContent = title;
            reviewMessage.textContent = message;
            reviewModal.style.display = 'flex';
        }
        
        // æ›´æ–°ç”¨æˆ·è®¢å•
        function updateUserOrders() {
            userOrdersList.innerHTML = '';
            
            const userOrders = orders.filter(order => order.userId === currentUser.id);
            
            if (userOrders.length === 0) {
                userOrdersList.innerHTML = '<div class="status-card"><div class="status-desc">æš‚æ— è®¢å•</div></div>';
                return;
            }
            
            userOrders.forEach(order => {
                const statusCard = document.createElement('div');
                statusCard.className = 'status-card';
                
                let statusText = '';
                if (order.status === 'pending') {
                    statusText = 'çŠ¶æ€: æ­£åœ¨å®¡æ ¸ä¸­';
                } else if (order.status === 'approved') {
                    statusText = 'çŠ¶æ€: å®¡æ ¸é€šè¿‡';
                } else {
                    statusText = `çŠ¶æ€: å®¡æ ¸æœªé€šè¿‡ - ç†ç”±: ${order.reason || 'ä¿¡æ¯ä¸å®Œæ•´'}`;
                }
                
                statusCard.innerHTML = `
                    <div class="status-title">${order.orderTitle} - ${order.spec}</div>
                    <div class="status-desc">${statusText}</div>
                    <div class="status-desc">ä¸‹å•æ—¶é—´: ${order.timestamp}</div>
                `;
                userOrdersList.appendChild(statusCard);
            });
        }
        
        // æ›´æ–°åå°ç®¡ç†ç•Œé¢ï¼ˆåªæœ‰ç‚¹å‡»åå°æŒ‰é’®æ—¶æ‰ä¼šè°ƒç”¨ï¼‰
        function updateAdminPanel() {
            // æ›´æ–°ç”¨æˆ·åˆ—è¡¨
            userList.innerHTML = '';
            users.forEach(user => {
                const userItem = document.createElement('div');
                userItem.className = 'user-item';
                userItem.innerHTML = `
                    <div><strong>${user.name}</strong> - ${user.server}</div>
                    <div>æ³¨å†Œæ—¶é—´: ${user.registerTime}</div>
                `;
                userList.appendChild(userItem);
            });
            
            // æ›´æ–°è®¢å•åˆ—è¡¨
            adminOrderList.innerHTML = '';
            orders.forEach(order => {
                const orderItem = document.createElement('div');
                orderItem.className = 'order-item';
                orderItem.innerHTML = `
                    <div><strong>è®¢å• #${order.id}</strong></div>
                    <div>ç”¨æˆ·: ${order.userName} (${order.userServer})</div>
                    <div>å•†å“: ${order.orderTitle} - ${order.spec}</div>
                    <div>æ—¶é—´: ${order.timestamp}</div>
                    <div>çŠ¶æ€: ${order.status === 'pending' ? 'å®¡æ ¸ä¸­' : order.status === 'approved' ? 'å·²é€šè¿‡' : 'æœªé€šè¿‡'}</div>
                    ${order.status === 'pending' ? `
                        <div class="order-actions">
                            <button class="approve-btn" data-order="${order.id}">é€šè¿‡</button>
                            <button class="reject-btn" data-order="${order.id}">æ‹’ç»</button>
                        </div>
                    ` : ''}
                `;
                adminOrderList.appendChild(orderItem);
            });
            
            // æ·»åŠ å®¡æ ¸æŒ‰é’®äº‹ä»¶
            document.querySelectorAll('.approve-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const orderId = parseInt(this.dataset.order);
                    const order = orders.find(o => o.id === orderId);
                    if (order) {
                        order.status = 'approved';
                        localStorage.setItem('orders', JSON.stringify(orders));
                        updateAdminPanel();
                        
                        // æ›´æ–°ç”¨æˆ·è®¢å•æ˜¾ç¤º
                        if (currentUser && order.userId === currentUser.id) {
                            updateUserOrders();
                            showReviewMessage('å®¡æ ¸é€šè¿‡', 'æ‚¨çš„è®¢å•å·²é€šè¿‡å®¡æ ¸ï¼');
                        }
                    }
                });
            });
            
            document.querySelectorAll('.reject-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const orderId = parseInt(this.dataset.order);
                    const order = orders.find(o => o.id === orderId);
                    if (order) {
                        order.status = 'rejected';
                        order.reason = prompt('è¯·è¾“å…¥æ‹’ç»ç†ç”±:', 'ä¿¡æ¯ä¸ç¬¦åˆè¦æ±‚');
                        localStorage.setItem('orders', JSON.stringify(orders));
                        updateAdminPanel();
                        
                        // æ›´æ–°ç”¨æˆ·è®¢å•æ˜¾ç¤º
                        if (currentUser && order.userId === currentUser.id) {
                            updateUserOrders();
                            showReviewMessage('å®¡æ ¸æœªé€šè¿‡', `æ‚¨çš„è®¢å•æœªé€šè¿‡å®¡æ ¸ï¼Œç†ç”±: ${order.reason}`);
                        }
                    }
                });
            });
        }
        
        // æ¸¸æˆåç§°å¼¹çª—ç¡®è®¤äº‹ä»¶
        gameNameConfirmBtn.addEventListener('click', function() {
            const name = gameNameInput.value.trim();
            if (!name) {
                alert('è¯·è¾“å…¥æ¸¸æˆåç§°');
                return;
            }
            // ä¸´æ—¶å­˜å‚¨æ¸¸æˆåç§°
            sessionStorage.setItem('tempGameName', name);
            gameNameModal.style.display = 'none';
            serverModal.style.display = 'flex';
        });
        
        // åŒºæœå¼¹çª—ç¡®è®¤äº‹ä»¶
        serverConfirmBtn.addEventListener('click', function() {
            const server = serverSelect.value;
            const name = sessionStorage.getItem('tempGameName');
            if (!server) {
                alert('è¯·é€‰æ‹©åŒºæœ');
                return;
            }
            // åˆ›å»ºç”¨æˆ·
            const userId = users.length + 1;
            currentUser = {
                id: userId,
                name: name,
                server: server,
                registerTime: new Date().toLocaleString()
            };
            // ä¿å­˜ç”¨æˆ·
            users.push(currentUser);
            localStorage.setItem('users', JSON.stringify(users));
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            sessionStorage.removeItem('tempGameName'); // æ¸…é™¤ä¸´æ—¶å­˜å‚¨
            serverModal.style.display = 'none';
            showMainApp();
        });
        
        // é€€å‡ºç™»å½•äº‹ä»¶
        logoutBtn.addEventListener('click', function() {
            // æ¸…é™¤å½“å‰ç”¨æˆ·
            localStorage.removeItem('currentUser');
            currentUser = null;
            // éšè—ä¸»ç•Œé¢ï¼Œæ˜¾ç¤ºæ¸¸æˆåç§°å¼¹çª—
            mainContainer.style.display = 'none';
            gameNameModal.style.display = 'flex';
            // æ¸…ç©ºè¾“å…¥æ¡†
            gameNameInput.value = '';
            serverSelect.value = '';
        });
        
        // å¯¼èˆªåˆ‡æ¢
        navItems.forEach(item => {
            item.addEventListener('click', function() {
                const pageId = this.dataset.page;
                
                // æ›´æ–°å¯¼èˆªçŠ¶æ€
                navItems.forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');
                
                // æ˜¾ç¤ºå¯¹åº”é¡µé¢
                pages.forEach(page => page.classList.remove('active'));
                document.getElementById(pageId).classList.add('active');
                
                // å¦‚æœæ˜¯æˆ‘çš„é¡µé¢ï¼Œæ›´æ–°è®¢å•ä¿¡æ¯
                if (pageId === 'profilePage' && currentUser) {
                    updateUserOrders();
                }
            });
        });
        
        // ç¡®è®¤ä¸‹å•
        confirmOrderBtn.addEventListener('click', function() {
            const selectedSpec = document.querySelector('.spec-modal.active');
            
            if (!selectedSpec) {
                alert('è¯·é€‰æ‹©ä¸€ä¸ªè§„æ ¼');
                return;
            }
            
            // åˆ›å»ºè®¢å•
            const order = {
                id: nextOrderId++,
                userId: currentUser.id,
                userName: currentUser.name,
                userServer: currentUser.server,
                orderTitle: currentOrder.title,
                spec: currentOrder.specs[selectedSpec.dataset.spec],
                status: 'pending',
                timestamp: new Date().toLocaleString()
            };
            
            orders.push(order);
            localStorage.setItem('orders', JSON.stringify(orders));
            
            // å…³é—­ä¸‹å•å¼¹çª—
            orderModal.style.display = 'none';
            
            // æ˜¾ç¤ºå®¡æ ¸ä¸­æ¶ˆæ¯
            showReviewMessage('å®¡æ ¸ä¸­', 'æ‚¨çš„è®¢å•å·²æäº¤ï¼Œæ­£åœ¨å®¡æ ¸ä¸­...');
            
            // æ›´æ–°ç”¨æˆ·è®¢å•æ˜¾ç¤º
            updateUserOrders();
        });
        
        // å–æ¶ˆä¸‹å•
        cancelOrderBtn.addEventListener('click', function() {
            orderModal.style.display = 'none';
        });
        
        // å®¡æ ¸å¼¹çª—å…³é—­
        reviewCloseBtn.addEventListener('click', function() {
            reviewModal.style.display = 'none';
        });
        
        // åå°ç®¡ç†æŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼ˆåªæœ‰ç‚¹å‡»æ‰æ˜¾ç¤ºå¯†ç å¼¹çª—ï¼‰
        adminBtn.addEventListener('click', function() {
            adminPasswordModal.style.display = 'flex';
        });
        
        // åå°å¯†ç éªŒè¯
        adminPasswordBtn.addEventListener('click', function() {
            const password = adminPasswordInput.value;
            
            if (password === ADMIN_PASSWORD) {
                adminPasswordModal.style.display = 'none';
                adminModal.style.display = 'flex';
                adminPasswordInput.value = '';
                // æ­¤æ—¶æ‰æ›´æ–°åå°é¢æ¿æ•°æ®
                updateAdminPanel();
            } else {
                alert('å¯†ç é”™è¯¯ï¼');
                adminPasswordInput.value = '';
            }
        });
        
        adminCloseBtn.addEventListener('click', function() {
            adminModal.style.display = 'none';
        });
        
        // åˆå§‹åŒ–åº”ç”¨
        init();
    </script>
</body>
</html>
